@model IEnumerable<InventoryStudio.Models.OrderManagement.SalesOrder.SalesOrderViewModel>

@{
    ViewData["Title"] = "Index";
}


<div class="container-fluid py-4 h-100">
    <div class="card custom-card h-100">
        <div class="card-header hstack align-items-center justify-content-between">
            <div class="card-title">
                Sales Order 
            </div>
            <div class="hstack btn-list mt-md-0 mt-2">
                <a asp-controller="SalesOrder" asp-action="Create" type="button" class="btn btn-sm btn-primary btn-wave hstack align-items-center" aria-label="Create sales order button">
                    <i class="bi-plus me-2 align-middle d-inline-block fs-16"></i>Create
                </a>
            </div>
        </div>
        <div class="card-body">
            <ejs-grid id="Grid" class="h-100" allowPaging="true" allowReordering="true" allowSorting="true" toolbarClick="toolbarClick" allowSelection="true" allowFiltering="true" enableStickyHeader="true" width="100%" height="100%"
                      allowExcelExport="true" allowPdfExport="true" toolbar="@(new List<string>() { "Delete", "PdfExport", "ExcelExport" })">

                <e-grid-editSettings showDeleteConfirmDialog="true" allowDeleting="true">
                </e-grid-editSettings>
                <e-grid-filterSettings type="Excel" mode="OnEnter"></e-grid-filterSettings>
                <e-data-manager url="/SalesOrder/UrlDatasource" adaptor="UrlAdaptor" insertUrl="/SalesOrder/Insert"
                                updateUrl="/SalesOrder/Update" removeUrl="/SalesOrder/Remove">
                </e-data-manager>
                @* <e-grid-pagesettings pageCount="5"></e-grid-pagesettings> *@
                <e-grid-columns>
                    <e-grid-column visible="false" field="SalesOrderID" headerText="ID" type="int" isPrimaryKey="true"
                                   validationRules="@(new { number = true })" width="80">
                    </e-grid-column>
                    <e-grid-column headerText="Actions" template="#actions" width="100" maxWidth="100"></e-grid-column>
                    <e-grid-column field="PONumber" headerText="PO Number" width="120"></e-grid-column>
                    <e-grid-column field="TranDate" headerText="Transaction Date" type="datetime" format="M/d/yyyy h:mm a" width="120"></e-grid-column>
                    <e-grid-column field="ShippingAmount" headerText="Shipping Amount" width="120"></e-grid-column>
                    <e-grid-column field="ShippingTaxAmount" headerText="Shipping Tax Amount" width="120"></e-grid-column>
                    <e-grid-column field="ItemTaxAmount" headerText="Item Tax Amount" width="120"></e-grid-column>
                    <e-grid-column field="DiscountAmount" headerText="Discount Amount" width="120"></e-grid-column>
                    <e-grid-column field="SalesSource" headerText="Sales Source" width="120"></e-grid-column>
                    <e-grid-column field="ShippingMethod" headerText="Shipping Method" width="120"></e-grid-column>
                    <e-grid-column field="ShippingCarrier" headerText="Shipping Carrier" width="120"></e-grid-column>
                    <e-grid-column field="ShippingPackage" headerText="Shipping Package" width="120"></e-grid-column>
                    <e-grid-column field="ShippingServiceCode" headerText="Shipping Service Code" width="120"></e-grid-column>
                    <e-grid-column field="ShippingFrom" headerText="Shipping From" width="120"></e-grid-column>
                    <e-grid-column field="ShippingTo" headerText="Shipping To" width="120"></e-grid-column>
                    <e-grid-column field="Status" headerText="Status" width="120"></e-grid-column>
                    <e-grid-column field="IsClosed" headerText="Is Closed" width="120"></e-grid-column>
                    <e-grid-column field="ExternalID" headerText="External ID" width="120"></e-grid-column>
                    <e-grid-column field="InternalNote" headerText="Internal Note" width="120"></e-grid-column>
                    <e-grid-column field="CustomerNote" headerText="Customer Note" width="120"></e-grid-column>
                    <e-grid-column field="GiftMessage" headerText="Gift Message" width="120"></e-grid-column>
                    <e-grid-column field="LabelMessage" headerText="Label Message" width="120"></e-grid-column>
                    <e-grid-column field="ReferenceNumber" headerText="Reference Number" width="120"></e-grid-column>
                </e-grid-columns>
            </ejs-grid>
        </div>
    </div>
</div>

<!-- Actions template -->
<script id="actions" type="text/x-template">
    <div class="hstack gap-2">
        <a href="/SalesOrder/Edit?id=${SalesOrderID}" class="btn btn-icon btn-warning-light" data-bs-toggle="tooltip" title="Edit sales order" aria-label="Edit sales order button">
            <i class="bi-pencil-fill"></i>
        </a>
        <a href="/SalesOrder/Details?id=${SalesOrderID}" class="btn btn-icon btn-info-light" data-bs-toggle="tooltip" title="View sales order" aria-label="View sales order button">
            <i class="bi-eye-fill"></i>
        </a>
    </div>
</script>

<script src="@Url.Content("~/js/utils/utils.js")"></script>

<!-- Javascript logic for datagrid -->
<script lang="js">
    const toolbarClick = customExportToolbarClick("Grid", "IS_SalesOrder");
</script>